(function(c){var b=(c)?window[c]={}:window.SK={};var a=function(e){function d(){}d.prototype=e;return new d();};b.AbstractSignal=function(){};b.AbstractSignal.prototype={_slotCollection:null,register:function(e,d){var f=new b.Slot(e,d);
return this._slotCollection.append(f,{context:d});},registerByPriority:function(f,e,d){var g=new b.Slot(f,e,d);return this._addByPriority(g);},remove:function(d){this._slotCollection.remove(d);
return this;},removeAll:function(){this._slotCollection.removeAll();return this;},dispatch:function(e){var f=this._slotCollection.getSlotList();for(var d=0;
d<f.length;d++){f[d].execute(e);}return this;},_addByPriority:function(g){var d=this._slotCollection.getSlotList(),e=d.length,f=g.getPriority();do{e--;
}while(d[e]&&g.getPriority()<=d[e].getPriority());return d.splice(e+1,0,g);}};b.OnceSignal=function(){this._slotCollection=null;this.initialize();};b.OnceSignal.prototype=a(b.AbstractSignal.prototype);
b.OnceSignal.prototype._slotAdded=false;b.OnceSignal.prototype.initialize=function(){this._slotCollection=new b.SlotCollection();};b.OnceSignal.prototype.add=function(f,d){var e=d||{};
if(this._slotAdded==true){throw new Error("Cannot add more then one slot for a OnceSignal type");}this._slotAdded=true;return this.register(f,e.context);
};b.Signal=function(){this._slotCollection=null;this.initialize();};b.Signal.prototype=a(b.AbstractSignal.prototype);b.Signal.prototype.initialize=function(){this._slotCollection=new b.SlotCollection();
};b.Signal.prototype.add=function(f,d){var e=d||{};return this.register(f,e.context);};b.PrioritySignal=function(){this._slotCollection=null;this.initialize();
};b.PrioritySignal.prototype=a(b.AbstractSignal.prototype);b.PrioritySignal.prototype.initialize=function(){this._slotCollection=new b.SlotCollection();
};b.PrioritySignal.prototype.add=function(f,d){var e=d||{};return this.registerByPriority(f,e.context,e.priority);};b.SlotCollection=function(){this._list=[];
};b.SlotCollection.prototype={_list:null,append:function(d){if(typeof d.getHandler()!=="function"){throw new Error("Listener slot must be a function!");
}this._list.push(d);return d;},remove:function(e){var d=this._getIndex(listener);this._removeSlot(d);},removeAll:function(){this._list=[];},getSlotList:function(){return this._list;
},_getIndex:function(e){var f,d;for(d in this._list){f=this._list[d];if(f.getHandler()===e){return d;}}return -1;},_removeSlot:function(d){if(d>=0){this._list.splice(d,1);
}}};b.Slot=function(f,e,d){this.initialize(f,e,d);};b.Slot.prototype={_handler:null,_context:null,_priority:0,initialize:function(f,e,d){this.setHandler(f);
this.setContext(e||this);this.setPriority(d||0);},execute:function(d){this._handler.call(this._context,d);},setContext:function(d){if(typeof d!=="object"){throw new Error("Slot context(ctx) should be of type object");
}this._context=d;},getContext:function(){return this._context;},setPriority:function(d){if(typeof d!=="number"){throw new Error("slot priority should be of type number");
}this._priority=d;},getPriority:function(){return this._priority;},setHandler:function(d){if(typeof d!=="function"){throw new Error("slot handler must be of type function!");
}this._handler=d;},getHandler:function(){return this._handler;}};}("SK"));